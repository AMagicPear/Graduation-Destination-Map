<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>èšæ˜¯ä¸€å›¢ç«ï¼Œæ•£æ˜¯æ»¡å¤©æ˜Ÿ | æ±Ÿè‹çœæœ¨æ¸é«˜çº§ä¸­å­¦22å±Š7ç­æ¯•ä¸šå»å‘å›¾</title>

  <script type="text/javascript" src="https://registry.npmmirror.com/echarts/3.8.0/files/dist/echarts.min.js"></script>
  <script type="text/javascript" src="https://registry.npmmirror.com/jquery/3.7.1/files/dist/jquery.min.js"></script>
  <style>
    @font-face {
      font-family: 'AlibabaPuHuiTi';
      src: url('fonts/AlibabaPuHuiTi-3-45-Light.woff2') format('woff2');
      font-weight: 300;
      /* Light */
      font-style: normal;
    }

    @font-face {
      font-family: 'AlibabaPuHuiTi';
      src: url('fonts/AlibabaPuHuiTi-3-55-Regular.woff2') format('woff2');
      font-weight: 400;
      /* Regular */
      font-style: normal;
    }

    @font-face {
      font-family: 'AlibabaPuHuiTi';
      src: url('fonts/AlibabaPuHuiTi-3-65-Medium.woff2') format('woff2');
      font-weight: 500;
      /* Medium */
      font-style: normal;
    }

    @font-face {
      font-family: 'AlibabaPuHuiTi';
      src: url('fonts/AlibabaPuHuiTi-3-75-SemiBold.woff2') format('woff2');
      font-weight: 600;
      /* SemiBold */
      font-style: normal;
    }

    @font-face {
      font-family: 'AlibabaPuHuiTi';
      src: url('fonts/AlibabaPuHuiTi-3-85-Bold.woff2') format('woff2');
      font-weight: 700;
      /* Bold */
      font-style: normal;
    }
        /* æ‚¬æµ®ç»„ä»¶æ ·å¼ */
        .scroll-hint {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 10px 20px;
      border-radius: 5px;
      font-family: 'AlibabaPuHuiTi', sans-serif;
      font-size: 14px;
      display: none;
    }
  </style>
  <script type="text/javascript" src="./maps/china.js"></script>
</head>

<body>
  <!-- æ‚¬æµ®ç»„ä»¶ -->
  <div class="scroll-hint">ä¸‹æ»‘å¯è¿›å…¥è¯„è®ºåŒºå“¦ğŸ¤©ï¼</div>
  <script>
    $(document).ready(function () {
      // æ˜¾ç¤ºæ‚¬æµ®ç»„ä»¶
      $('.scroll-hint').fadeIn();

      // å½“ç”¨æˆ·å¼€å§‹æ»šåŠ¨æ—¶éšè—æ‚¬æµ®ç»„ä»¶
      $(window).scroll(function () {
        $('.scroll-hint').fadeOut();
      });
    });
  </script>
  <!-- ä¸º ECharts å‡†å¤‡ä¸€ä¸ªå®šä¹‰äº†å®½é«˜çš„ DOM -->
  <div id="chart-panel" style="width: calc(100vw - 200px);height:calc(100vh - 200px); padding: 100px; margin: 0 auto;">
  </div>
  <script type="text/javascript">
    // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹
    var myChart = echarts.init(document.getElementById('chart-panel'));
    // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®
    var option = {};
    var name_title = "æ±Ÿè‹çœæœ¨æ¸é«˜çº§ä¸­å­¦22å±Š7ç­æ¯•ä¸šå»å‘å›¾"
    var subname = 'Deployed by AMagicPear'
    var nameColor = "#000"
    var name_fontFamily = 'AlibabaPuHuiTi'
    var subname_fontSize = 15
    var name_fontSize = 18
    var mapName = 'china'
    var data = [
      { name: "æ±Ÿè‹", value: 41 },
      { name: "è¾½å®", value: 1 },
      { name: "å‰æ—", value: 2 },
      { name: "é™•è¥¿", value: 2 },
      { name: "åŒ—äº¬", value: 1 },
      { name: "å››å·", value: 1 },
      { name: "é‡åº†", value: 1 },
      { name: "ä¸Šæµ·", value: 2 },
      { name: "ç¦å»º", value: 1 },
    ];

    var geoCoordMap = {};
    var toolTipData = [
      { name: "åŒ—äº¬", value: [{ name: "ä¸­å¤®è´¢ç»å¤§å­¦", value: "èµµæ™¨æ›¦" }] },
      {
        name: "æ±Ÿè‹",
        value: [
          { name: "å—äº¬å¤§å­¦", value: "ç‹ä¿Šæ°" },
          { name: "ä¸œå—å¤§å­¦", value: "ç‹ä½³æ• é’±ä½³è£•" },
          { name: "å—äº¬å¸ˆèŒƒå¤§å­¦", value: "æœ±ç†™æ™´ é¡¾æŸé€¸ä½³ ææ³½æ¥· åˆ˜æ¬£" },
          { name: "å—äº¬æ—ä¸šå¤§å­¦", value: "æœ±å¾æ° é±¼å®¶ä¹" },
          { name: "å—äº¬ä¿¡æ¯å·¥ç¨‹å¤§å­¦", value: "èµµä¹ è´¹å¿ƒé˜³ æ­èŠ« æ›¹ç‰è±ª" },
          { name: "å—äº¬é‚®ç”µå¤§å­¦", value: "é»„ç¿ æ²ˆç«‹" },
          { name: "å—äº¬åŒ»ç§‘å¤§å­¦", value: "æé›¨æ¡ å¾å­æœ ç§¦å­æ‰ ç‹åŸ¹è£" },
          { name: "å—äº¬è´¢ç»å¤§å­¦", value: "é‚¢è¹ æ¨ç»®æ´µ" },
          { name: "æ²³æµ·å¤§å­¦", value: "ç‹åŠ²èˆŸ" },
          { name: "è‹å·å¤§å­¦", value: "é»„æ¬£å¦ å¼ ç¨‹ç¨‹ å´æº¢ä¹ è–›è¿æ¶›" },
          { name: "è‹å·ç§‘æŠ€å¤§å­¦", value: "é™†éœ„ æ½˜ç ”" },
          { name: "æ±Ÿå—å¤§å­¦", value: "å­”ç»´å‡¯ é™¶ç³" },
          { name: "ä¸­å›½çŸ¿ä¸šå¤§å­¦", value: "æ½˜æ˜Ÿæ’" },
          { name: "å¾å·åŒ»ç§‘å¤§å­¦", value: "é¢œçº¢éœ" },
          { name: "å—äº¬å®¡è®¡å¤§å­¦", value: "å‘¨æ˜°æœ‰ å‘¨å¯æ–°" },
          { name: "æ±Ÿè‹è­¦å®˜å­¦é™¢", value: "å€ªå­è¡¡" },
          { name: "æ±Ÿè‹å¸ˆèŒƒå¤§å­¦", value: "æ²ˆçª" },
          { name: "è¥¿äº¤åˆ©ç‰©æµ¦å¤§å­¦", value: "æ²ˆè‰º" },
          { name: "å¸¸å·å¤§å­¦", value: "æˆšä¸€è‹‡" },
          { name: "æ‰¬å·å¤§å­¦", value: "åº„è–›å‰ å¾å­è¨€" },
          { name: "å¸¸ç†Ÿç†å·¥å­¦é™¢", value: "é‡‘å®ä¸€" }
        ]
      },
      { name: "è¾½å®", value: [{ name: "ä¸œåŒ—å¤§å­¦", value: "èƒ¡æ–‡æ³¢" }] },
      { name: "å‰æ—", value: [{ name: "å‰æ—å¤§å­¦", value: "ç¨‹ç‚³ç¿” ä¾¯å¿ƒæ€¡" }] },
      { name: "é™•è¥¿", value: [{ name: "è¥¿å®‰äº¤é€šå¤§å­¦", value: "æœ±å¤©æ¨ åŒ…çš–æš„" }] },
      { name: "å››å·", value: [{ name: "å››å·å¤§å­¦", value: "å¸­é¢–" }] },
      { name: "é‡åº†", value: [{ name: "é‡åº†å¤§å­¦", value: "é«˜æå§ç¼˜" }] },
      { name: "ç¦å»º", value: [{ name: "å¦é—¨å¤§å­¦", value: "æ²™å®‡è½©" }] },
      {
        name: "ä¸Šæµ·", value: [{ name: "ä¸Šæµ·å¥åº·åŒ»å­¦é™¢", value: "ç‹å®‡é‘«" },
        { name: "ä¸Šæµ·æ”¿æ³•å­¦é™¢", value: "ä¼çª" }
        ]
      },
    ];

    /*è·å–åœ°å›¾æ•°æ®*/
    myChart.showLoading();
    var mapFeatures = echarts.getMap(mapName).geoJson.features;
    myChart.hideLoading();
    mapFeatures.forEach(function (v) {
      // åœ°åŒºåç§°
      var name = v.properties.name;
      // åœ°åŒºç»çº¬åº¦
      geoCoordMap[name] = v.properties.cp;

    });

    // console.log("============geoCoordMap===================")
    // console.log(geoCoordMap)
    // console.log("================data======================")
    console.log(data)
    console.log(toolTipData)
    var max = 480,
      min = 9; // todo 
    var maxSize4Pin = 100,
      minSize4Pin = 20;

    var convertData = function (data) {
      var res = [];
      for (var i = 0; i < data.length; i++) {
        var geoCoord = geoCoordMap[data[i].name];
        if (geoCoord) {
          res.push({
            name: data[i].name,
            value: geoCoord.concat(data[i].value),
          });
        }
      }
      return res;
    };
    option = {
      title: {
        text: name_title,
        subtext: subname,
        x: 'center',
        textStyle: {
          color: nameColor,
          fontFamily: name_fontFamily,
          fontSize: name_fontSize,
        },
        subtextStyle: {
          fontSize: subname_fontSize,
          fontFamily: name_fontFamily
        }
      },
      tooltip: {
        trigger: 'item',
        formatter: function (params) {
          var toolTiphtml = '';
          for (var i = 0; i < toolTipData.length; i++) {
            if (params.name == toolTipData[i].name) {
              toolTiphtml += `<strong>${toolTipData[i].name}</strong><br>`;
              for (var j = 0; j < toolTipData[i].value.length; j++) {
                toolTiphtml += toolTipData[i].value[j].name + 'ï¼š' + toolTipData[i].value[j].value + "<br>";
              }
            }
          }
          console.log(toolTiphtml);
          // console.log(convertData(data))
          return toolTiphtml;
        }
      },
      // legend: {
      //     orient: 'vertical',
      //     y: 'bottom',
      //     x: 'right',
      //     data: ['credit_pm2.5'],
      //     textStyle: {
      //         color: '#fff'
      //     }
      // },
      visualMap: {
        show: true,
        min: 0,
        max: 45,
        left: 'left',
        top: 'bottom',
        text: ['é«˜', 'ä½'], // æ–‡æœ¬ï¼Œé»˜è®¤ä¸ºæ•°å€¼æ–‡æœ¬
        calculable: true,
        seriesIndex: [1],
        inRange: {
          // color: ['#3B5077', '#031525'] // è“é»‘
          // color: ['#ffc0cb', '#800080'] // çº¢ç´«
          // color: ['#3C3B3F', '#605C3C'] // é»‘ç»¿
          // color: ['#0f0c29', '#302b63', '#24243e'] // é»‘ç´«é»‘
          // color: ['#23074d', '#cc5333'] // ç´«çº¢
          color: ['#00467F', '#A5CC82'] // è“ç»¿
          // color: ['#1488CC', '#2B32B2'] // æµ…è“

        }
      },
      /*å·¥å…·æŒ‰é’®ç»„*/
      // toolbox: {
      //     show: true,
      //     orient: 'vertical',
      //     left: 'right',
      //     top: 'center',
      //     feature: {
      //         dataView: {
      //             readOnly: false
      //         },
      //         restore: {},
      //         saveAsImage: {}
      //     }
      // },
      geo: {
        show: true,
        map: mapName,
        label: {
          normal: {
            show: false
          },
          emphasis: {
            show: false,
          }
        },
        roam: true,
        itemStyle: {
          normal: {
            areaColor: '#031525',
            borderColor: '#3B5077',
          },
          emphasis: {
            areaColor: '#2B91B7',
          }
        }
      },
      series: [{
        name: 'æ•£ç‚¹',
        type: 'scatter',
        coordinateSystem: 'geo',
        data: convertData(data),
        symbolSize: function (val) {
          return val[2] / 10;
        },
        label: {
          normal: {
            formatter: '{b}',
            position: 'right',
            show: true
          },
          emphasis: {
            show: true
          }
        },
        itemStyle: {
          normal: {
            color: '#05C3F9'
          }
        }
      },
      {
        type: 'map',
        map: mapName,
        geoIndex: 0,
        aspectScale: 0.75, //é•¿å®½æ¯”
        showLegendSymbol: false, // å­˜åœ¨legendæ—¶æ˜¾ç¤º
        label: {
          normal: {
            show: true
          },
          emphasis: {
            show: false,
            textStyle: {
              color: '#fff'
            }
          }
        },
        roam: true,
        itemStyle: {
          normal: {
            areaColor: '#031525',
            borderColor: '#3B5077',
          },
          emphasis: {
            areaColor: '#2B91B7'
          }
        },
        animation: false,
        data: data
      },
      {
        name: 'ç‚¹',
        type: 'scatter',
        coordinateSystem: 'geo',
        symbol: 'pin', //æ°”æ³¡
        symbolSize: function (val) {
          var a = (maxSize4Pin - minSize4Pin) / (max - min);
          var b = minSize4Pin - a * min;
          b = maxSize4Pin - a * max;
          return a * val[2] + b;
        },
        label: {
          normal: {
            show: true,
            textStyle: {
              color: '#fff',
              fontSize: 8,
            }
          }
        },
        itemStyle: {
          normal: {
            color: '#F62157', //æ ‡å¿—é¢œè‰²
          }
        },
        zlevel: 6,
        data: convertData(data),
      },
      {
        name: 'Top 5',
        type: 'effectScatter',
        coordinateSystem: 'geo',
        data: convertData(data.sort(function (a, b) {
          return b.value - a.value;
        }).slice(0, 5)),
        symbolSize: function (val) {
          return val[2] / 10;
        },
        showEffectOn: 'render',
        rippleEffect: {
          brushType: 'stroke'
        },
        hoverAnimation: true,
        label: {
          normal: {
            formatter: '{b}',
            position: 'right',
            show: true
          }
        },
        itemStyle: {
          normal: {
            color: 'yellow',
            shadowBlur: 10,
            shadowColor: 'yellow'
          }
        },
        zlevel: 1
      },

      ]
    };
    myChart.setOption(option);
    //=============== end ===============//

    // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨ã€‚
    if (option && typeof option === 'object') {
      myChart.setOption(option);
    }
    window.addEventListener('resize', myChart.resize);
  </script>
  <script src="https://giscus.app/client.js" data-repo="amagicpear/Graduation-Destination-Map"
    data-repo-id="R_kgDONPHlSw" data-category="General" data-category-id="DIC_kwDONPHlS84CkQU1" data-mapping="pathname"
    data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top"
    data-theme="preferred_color_scheme" data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous" async>
    </script>
</body>

</html>